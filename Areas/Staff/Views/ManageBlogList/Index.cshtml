@model IEnumerable<GreTutor.Models.BlogPost>
@{
    ViewData["Title"] = "Manage Blog List";
    Layout = "_Layout";
}

<!-- Page Banner Start -->
@await Html.PartialAsync("_PageBannerStart")
<!-- Page Banner End -->

<h2 class="mt-3 text-primary fw-bold">Manage Blog</h2>

<div class="table-responsive mt-4">
    <table class="table table-hover table-bordered align-middle">
        <thead class="table-dark text-center">
            <tr>
                <th>Title</th>
                <th>Created</th>
                <th>Author</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var blog in Model)
            {
                <tr>
                    <td>@blog.Title</td>
                    <td>@blog.Created.ToString("dd/MM/yyyy HH:mm")</td>
                    <td>@(blog.User?.UserName ?? "Unknown")</td>
                    <td class="text-center">
                        @if (blog.Status == GreTutor.Models.BlogStatus.Pending)
                        {
                            <span class="badge bg-warning text-dark">Pending</span>
                        }
                        else if (blog.Status == GreTutor.Models.BlogStatus.Approved)
                        {
                            <span class="badge bg-success">Approved</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Rejected</span>
                        }
                    </td>
                    <td class="text-center">
                        @if (blog.Status == GreTutor.Models.BlogStatus.Pending)
                        {
                            <form action="@Url.Action("Approve", "ManageBlogList", new { area = "Staff" })" method="post"
                                class="d-inline">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@blog.BlogId" />
                                <button type="submit" class="btn btn-success btn-sm" title="Approve">Approve</button>
                            </form>

                            <form action="@Url.Action("Reject", "ManageBlogList", new { area = "Staff" })" method="post"
                                class="d-inline ms-2">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@blog.BlogId" />
                                <button type="submit" class="btn btn-warning btn-sm text-dark" title="Reject">Reject</button>
                            </form>
                        }
                        <form action="@Url.Action("Delete", "ManageBlogList", new { area = "Staff" })" method="post"
                            class="d-inline ms-2">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@blog.BlogId" />
                            <button type="submit" class="btn btn-danger btn-sm" title="Delete">Delete</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<style>
    table {
        border-radius: 10px;
        overflow: hidden;
    }

    .table-hover tbody tr:hover {
        background-color: #f8f9fa;
    }

    .btn {
        border-radius: 6px;
        transition: 0.3s;
    }

    .btn:hover {
        opacity: 0.8;
    }
</style>
